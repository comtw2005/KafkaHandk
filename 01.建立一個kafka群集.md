為了要模擬群集, 但是主機只有一台的情況下, 就只能在本機上起三個broker.
最有效的方式,就是調整設定檔來達成.

1. 準備三份設定檔
./conf/server1.properties
log.dirs=/tmp/kafka-logs1

./conf/server2.properties
log.dirs=/tmp/kafka-logs2


./conf/server3.properties
log.dirs=/tmp/kafka-logs3

2. 啟動
$HOME/kafka_2.13-3.3.1/bin/zookeeper-server-start.sh -daemon $HOME/kafka_2.13-3.3.1/config/zookeeper.properties
$HOME/kafka_2.13-3.3.1/bin/kafka-server-start.sh -daemon $HOME/kafka_2.13-3.3.1/config/server1.properties
$HOME/kafka_2.13-3.3.1/bin/kafka-server-start.sh -daemon $HOME/kafka_2.13-3.3.1/config/server2.properties
$HOME/kafka_2.13-3.3.1/bin/kafka-server-start.sh -daemon $HOME/kafka_2.13-3.3.1/config/server3.properties

3. Create Topic
$HOME/kafka_2.13-3.3.1/bin/kafka-topics.sh --create --bootstrap-server localhost:9091,localhost:9092,localhost:9093 --replication-factor 2 --partitions 4 --topic testP3
